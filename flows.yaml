config:
  default_fallback: "I'm listening. Text OUCH to start."

slots:
  stress_trigger:
    type: text
    persist: false
    description: "What is bothering you? (Co-worker, Boss, or Self-doubt)"
  user_message:
    type: text
    persist: false
    description: "Tell me more about what happened"
  subtype_choice:
    type: text
    persist: false
    description: "Which best describes you?"
  win_text:
    type: text
    persist: false
    description: "What was your win today?"
  followup_response:
    type: text
    persist: false
    description: "User response to follow-up check-in"

flows:
  ouch_flow:
    description: "Main career coaching conversation flow"
    triggers: ["OUCH", "ouch"]
    steps:
      - id: step_1
        type: response
        content: "Welcome! I hear you. What is bothering you at work? (Co-worker, Boss, or Self-doubt?)"
      - id: step_2
        type: collect
        variable: stress_trigger
      - id: step_3
        type: response
        content: "Tell me more about what happened with your {stress_trigger}."
      - id: step_4
        type: collect
        variable: user_message
      - id: step_5
        type: action
        action_name: analyze_stress_gemini
      - id: step_6
        type: branch
        condition: "ai_analysis.category == EMERGENCY"
        target_flow: emergency_flow
      - id: step_7
        type: action
        action_name: generate_final_advice
      - id: step_8
        type: response
        content: "{final_advice}"

  emergency_flow:
    description: "Emergency response flow for crisis situations"
    triggers: []
    steps:
      - id: step_1
        type: response
        content: "That sounds urgent. Please text 988 for free crisis support now. You're not alone."
      - id: step_2
        type: action
        action_name: alert_admin

  followup_flow:
    description: "Scheduled follow-up flow"
    triggers: []
    steps:
      - id: step_1
        type: response
        content: "Checking in! How are you feeling today after our last conversation?"
      - id: step_2
        type: collect
        variable: followup_response
      - id: step_3
        type: response
        content: "Thanks for sharing. Remember, you've got this!"

symptoms:
  micromanagement:
    name: "Micromanagement"
    keywords: "boss, control, micromanage, watching, no freedom"
    description: "Feeling controlled or watched too closely by management"
  toxic_coworker:
    name: "Toxic Coworker"
    keywords: "coworker, colleague, gossip, backstab, credit"
    description: "Issues with difficult colleagues"
  imposter_syndrome:
    name: "Imposter Syndrome"
    keywords: "not good enough, fraud, imposter, doubt, unqualified"
    description: "Self-doubt about abilities and qualifications"
  burnout:
    name: "Burnout"
    keywords: "exhausted, tired, overwhelmed, too much, burnout"
    description: "Physical and mental exhaustion from work"
